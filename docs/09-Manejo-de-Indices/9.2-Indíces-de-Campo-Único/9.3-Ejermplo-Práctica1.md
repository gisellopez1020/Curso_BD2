# Ejemplo prÃ¡ctico 1 

Un administrador de una tienda virtual necesita consultar la lista de ordenes realizadas por fecha, de la mÃ¡s reciente a las mÃ¡s antiguas. En este caso se podrÃ­a crear un Ã­ndice en el campo fechaOrden para mejorar el rendimiento de la consulta. 

![Esquema de Documentos Base de Datos Modulo2Ejemplo3](../../../imgs/esquema-modulo2Ejemplo3.png)

**Figura 40: Esquema de Documentos Base de Datos Modulo2Ejemplo3**

Para mejorar el rendimiento de esta consulta, se crearÃ¡ el siguiente Ã­ndice en la shell: 

```
db.Ordenes.createIndex({ fechaOrden: -1 }); 

```
Para comprobar su creaciÃ³n, se podrÃ¡ seleccionar la colecciÃ³n Ordenes en MongoDB Compass y dar clic en la pestaÃ±a â€œ**Indexes**â€ donde se observarÃ¡n los diferentes Ã­ndices con los que cuenta dicha colecciÃ³n. Es importante aclarar que los identificadores principales de cada documento de una colecciÃ³n tienen asociado un Ã­ndice, para garantizar que sea Ãºnico, por eso adicional al creado aparecerÃ¡ el Ã­ndice **_id_**. 

![Visualizar Ãndices ColecciÃ³n Ordenes en MongoDB Compass](../../../imgs/visualizar-indices.png)

**Figura 41: Visualizar Ãndices ColecciÃ³n Ordenes en MongoDB Compass**

Para utilizar el Ã­ndice creado, se deberÃ¡ realizar una consulta y especificar que el ordenamiento de los resultados se debe realizar mediante el campo fechaOrden de forma descendente, que es como se definiÃ³: 


```
db.Ordenes.find().sort({ fechaOrden: -1 }) 

```

Una vez MongoDB procese la consulta no deberÃ¡ realizar el ordenamiento de los documentos de forma manual. En su lugar, buscarÃ¡ el Ã­ndice correspondiente al campo â€œ**fechaOrden**â€ en un Ã¡rbol B balanceado, en donde ya estarÃ¡n ordenados. Mediante el Ã­ndice se relacionarÃ¡n los documentos y se devolverÃ¡n ordenados sin necesidad de realizar un paso adicional, reduciendo el tiempo de ejecuciÃ³n de la consulta y el uso de recursos. Mediante el siguiente comando se podrÃ¡ verificar si la consulta estÃ¡ haciendo uso del Ã­ndice.  

```
db.Ordenes.find().sort({ fechaOrden: -1 }).explain("executionStats"); 

```

En el resultado de la ejecuciÃ³n de este comando, se podrÃ¡ verificar si aparece **IXSCAN** con _fechaOrden: -1_ y que no se incluye una etapa **SORT**. Todo lo anterior indicarÃ¡ que la consulta utilizÃ³ el Ã­ndice y no requiriÃ³ ordenar los resultados de forma manual. 

> ### ğŸ‘‰**Sigue con el [Ejemplo 2](9.4-Ejemplo-PrÃ¡ctico2.md)**
