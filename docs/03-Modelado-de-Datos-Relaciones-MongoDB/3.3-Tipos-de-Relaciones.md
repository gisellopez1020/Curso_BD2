# Tipos de Relaciones

## _**Relaci√≥n uno-a-uno**_

Es la asociaci√≥n de dos documentos presentes en diferentes colecciones (A y B). En donde un documento de la colecci√≥n A se puede relacionar solo con un documento de la colecci√≥n B y viceversa.

_**Ejemplo:** Un Ingeniero tiene una tarjeta profesional._

![Relaciones](../../imgs/Relaci√≥n-Uno-a-Uno.png)

**Figura 7. Relaci√≥n uno-a-uno**

## **Soluci√≥n 1:** Mediante documentos embebidos [[10]](../05-Referencias/05-Referencias-Modulo-1.md#10)

![Uno-a-uno](../../imgs/Solucion1-uno-a-uno.png)

**Figura 8. Soluci√≥n 1 Relaci√≥n uno-a-uno**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y crear un documento embebido que represente la colecci√≥n ‚Äúhija‚Äù. Es importante aclarar que en el contexto de MongoDB la selecci√≥n de la colecci√≥n ‚Äúpadre‚Äù e ‚Äúhija‚Äù depender√° del contexto y las necesidades de la aplicaci√≥n. Esta opci√≥n es √≥ptima cuando los datos relacionados de la colecci√≥n ‚Äúhija‚Äù son peque√±os y se acceden con el documento principal. En la Figura 8, se puede observar que TarjetaProfesional se convirti√≥ en una propiedad en la colecci√≥n Ingenieros, nombrada como tarjetaProfesional. Esta propiedad es un documento embebido el cual est√° constituido por el n√∫mero, fecha de expedici√≥n, universidad y entidad.

## **Soluci√≥n 2:** Mediante documento relacionados [[10]](../05-Referencias/05-Referencias-Modulo-1.md#10)

![Uno-a-uno](../../imgs/Solucion2-uno-a-uno.png)

**Figura 9. Soluci√≥n 2 Relaci√≥n uno-a-uno**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y en la colecci√≥n ‚Äúhija‚Äù se crear√° un campo de referencia a un documento a la colecci√≥n ‚Äúpadre‚Äù. Es importante se√±alar que tambi√©n se podr√≠a implementar solo guardando la referencia de la colecci√≥n ‚Äúhija‚Äù en el padre. Esta opci√≥n es √∫til cuando los datos relacionados de la colecci√≥n ‚Äúhija‚Äù son grandes o se acceden de forma independiente.

## _**Relaci√≥n uno-a-muchos**_

Es la asociaci√≥n en donde un documento de la colecci√≥n A se puede relacionar con varios documentos de la colecci√≥n B, pero un documento de la colecci√≥n B solo puede estar relacionado con uno documento de la colecci√≥n A.

_**Ejemplo:** Un cliente puede ser due√±o de muchas mascotas._

![uno-a-muchos](../../imgs/Relaci√≥n-uno-a-muchos.png)

**Figura 10. Relaci√≥n uno-a-muchos**

## **Soluci√≥n 1:** Mediante documentos embebidos [[11]](../05-Referencias/05-Referencias-Modulo-1.md#11)

![Soluci√≥n1-uno-a-muchos](../../imgs/Solucion1-uno-a-uno.png)

**Figura 11. Soluci√≥n 2 Relaci√≥n uno-a-uno**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y crear un array de documentos que representen la colecci√≥n ‚Äúhija‚Äù. Esta opci√≥n es recomendada si la colecci√≥n ‚Äúhija‚Äù no puede existir por si sola y se accede con el documento principal. Podr√≠a ser ineficiente si el arreglo no tiene l√≠mites. En la Figura 10, se puede observar Mascotas se convirti√≥ en una propiedad en la colecci√≥n Clientes, a trav√©s de la especificaci√≥n de un arreglo que contendr√° documentos embebidos de la informaci√≥n de las diferentes mascotas.

## **Soluci√≥n 2:** Mediante documentos relacionados (Forma 1) [[11]](../05-Referencias/05-Referencias-Modulo-1.md#11)

![Soluci√≥n2-uno-a-muchos(forma1)](../../imgs/Soluci√≥n2-uno-a-muchos.png)

**Figura 12. Soluci√≥n 2 Relaci√≥n uno-a-muchos (Forma 1)**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y crear un arreglo referencias a la colecci√≥n ‚Äúhija‚Äù. Esta es una opci√≥n recomendada si la colecci√≥n ‚Äúhija‚Äù puede llegar a tener documentos ilimitados. En la Figura 11, se puede observar que en la colecci√≥n Clientes se cre√≥ un arreglo denominado o nombrado mascotasId que permitir√° almacenar las diferentes relaciones a la colecci√≥n Mascotas.

## **Soluci√≥n 2:** Mediante documentos relacionados (Forma 2) ‚Äã[[11]](../05-Referencias/05-Referencias-Modulo-1.md#11)

![Soluci√≥n2-uno-a-muchos(forma2)](../../imgs/Soluci√≥n2-uno-a-muchos-F2.png)

**Figura 13. Soluci√≥n 2 Relaci√≥n uno-a-muchos (Forma 2)**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y crear una referencia de este en la colecci√≥n ‚Äúhija‚Äù. Esta referencia puede ser √∫nicamente con identificador de la colecci√≥n padre. Tambi√©n se puede crear un documento con campos adicionales al identificar para facilitar las consultas.

## **Soluci√≥n 2:** Mediante documentos relacionados (Forma 3) ‚Äã[[11]](../05-Referencias/05-Referencias-Modulo-1.md#11)

![Soluci√≥n2-uno-a-muchos(forma3)](../../imgs/Soluci√≥n2-uno-a-muchos-F3.png)  
**Figura 14. Soluci√≥n 2 Relaci√≥n uno-a-muchos (Forma 3)**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y crear una referencia de este en la colecci√≥n ‚Äúhija‚Äù. Esta referencia puede ser √∫nicamente con identificador de la colecci√≥n padre o se puede crear un documento con campos adicionales para facilitar las consultas. En la Figura 13, se puede observar que en la colecci√≥n Mascotas se cre√≥ la propiedad cliente que es un documento embebido de referencia el cual est√° constituido por clienteId y nombre.

## **Soluci√≥n 2:** Mediante documentos relacionados (Forma 4) ‚Äã[[11]](../05-Referencias/05-Referencias-Modulo-1.md#11)

![Soluci√≥n2-uno-a-muchos(forma4)](../../imgs/Soluci√≥n2-uno-a-muchos-F4.png)

**Figura 15. Soluci√≥n 2 Relaci√≥n uno-a-muchos (Forma 4)**

**Explicaci√≥n:** Mediante referencias bidireccionales. En este caso la colecci√≥n ‚Äúpadre‚Äù tendr√° un arreglo de referencia a los documentos de la colecci√≥n ‚Äúhija‚Äù. Y en la colecci√≥n ‚Äúhija‚Äù tendr√° una referencia a un documento de la colecci√≥n ‚Äúpadre‚Äù. Sin embargo, este enfoque no es √≥ptimo debido a la complejidad que genera en las consultas y en el mantenimiento de la consistencia de los datos. Cada vez que se realiza un cambio en una de las colecciones, se requieren m√∫ltiples consultas para mantener sincronizadas las referencias, lo que puede incrementar el tiempo de ejecuci√≥n y el costo computacional, afectando el rendimiento de la aplicaci√≥n.

## _**Relaci√≥n muchos-a-muchos**_

Es la asociaci√≥n en donde un documento de una colecci√≥n A, se puede relacionar con uno o muchos documentos de la colecci√≥n B y viceversa.

_**Ejemplo:** Un empleado realiza muchas tareas y una tarea es realizada por muchos empleados_

![Relaci√≥n-muchos-a-muchos](../../imgs/Relaci√≥n-uno-a-muchos.png)

**Figura 16. Relaci√≥n muchos-a-muchos**

## **Soluci√≥n 1:** Mediante documentos embebidos [[12]](../05-Referencias/05-Referencias-Modulo-1.md#12)

![Soluci√≥n1-muchos-a-muchos](../../imgs/Soluci√≥n1-muchos-a-muchos.png)

**Figura 17. Soluci√≥n 1 Relaci√≥n muchos-a-muchos**

**Explicaci√≥n:** Identificar la colecci√≥n ‚Äúpadre‚Äù y crear un array de documentos embebidos. Cada elemento del array representa un documento de la colecci√≥n ‚Äúhija‚Äù. Mediante esta soluci√≥n no se crea la colecci√≥n ‚Äúhija‚Äù de forma independiente. Una de las posibles falencias es la duplicidad de datos. En la Figura 16, es posible observar que en la Colecci√≥n Empleados se cre√≥ la propiedad tareas que es un arreglo de documentos embebidos de informaci√≥n de tareas.

## **Soluci√≥n 2:** Mediante documentos relacionados (Forma 1) [[12]](../05-Referencias/05-Referencias-Modulo-1.md#12)

![Soluci√≥n2-muchos-a-muchos-F1](../../imgs/Soluci√≥n2-muchos-a-muchos-F1.png)

_**Nota:** La relaci√≥n tambi√©n se puede hacer en la direcci√≥n opuesta._

**Figura 18. Soluci√≥n 2 Relaci√≥n muchos-a-muchos (Forma 1)**

**Explicaci√≥n:** Identificar la colecci√≥n "padre" y crear un arreglo referencias a la colecci√≥n ‚Äúhija‚Äù. Esta es una de las opciones preferidas de implementaci√≥n. En la Figura 17, se puede observar que en la colecci√≥n Tareas se cre√≥ la propiedad empleados que es un arreglo de referencias a la colecci√≥n Empleados.

## **Soluci√≥n 2:** Mediante documentos relacionados (Forma 2) [[12]](../05-Referencias/05-Referencias-Modulo-1.md#12)

![Soluci√≥n2-muchos-a-muchos-F2](../../imgs/Soluci√≥n2-muchos-a-muchos-F2.png)

**Figura 19. Soluci√≥n 2 Relaci√≥n muchos-a-muchos (Forma 2)**

**Explicaci√≥n:** Guardar referencias de forma bidireccional en ambas colecciones. Es uno de los enfoques menos recomendados ya que son m√°s caras de gestionar en t√©rminos de rendimiento, consistencia de datos y complejidad en las operaciones. Al emplear este enfoque se tendr√≠an dificultades similares a las se√±aladas en una relaci√≥n uno a muchos (complejidad de consultas, mantenimiento de consistencia de datos y rendimiento). En la Figura 18 es posible observa que en cada una de las colecciones se cre√≥ el arreglo de referencias.

## Contin√∫a con el siguiente tema: [Herramienta de Modelado de Datos üõ†Ô∏è‚û°Ô∏è](/docs/04-Herramienta-de-Modelado/4.1-Herramienta-de-modelado-de-datos.md)
